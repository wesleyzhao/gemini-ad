!function(){"use strict";const e={rootMargin:"50px 0px",threshold:.01,enableBlurUp:!0,respectDataSaver:!0,enableRetry:!0,maxRetries:3,retryDelay:1e3,classes:{lazy:"lazy",loading:"lazy-loading",loaded:"lazy-loaded",error:"lazy-error",placeholder:"lazy-placeholder"}},a=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,s=new IntersectionObserver((e,a)=>{e.forEach(e=>{e.isIntersecting&&(t(e.target),a.unobserve(e.target))})},{rootMargin:e.rootMargin,threshold:e.threshold});function t(a,s=0){e.respectDataSaver&&navigator.connection&&!0===navigator.connection.saveData&&!a.hasAttribute("data-critical")?function(e){const a=document.createElement("div");a.className="data-saver-notice",a.innerHTML="\n            <p>Content hidden to save data</p>\n            <button onclick=\"this.parentElement.parentElement.querySelector('.lazy').click()\">Load anyway</button>\n        ",a.style.cssText="\n            padding: 1rem;\n            background: #f3f4f6;\n            border-radius: 8px;\n            text-align: center;\n            color: #6b7280;\n        ",e.addEventListener("click",()=>{t(e),a.remove()},{once:!0}),e.parentNode.insertBefore(a,e.nextSibling)}(a):(a.classList.add(e.classes.loading),"IMG"===a.tagName?r(a,s):"PICTURE"===a.tagName?function(e,a=0){const s=e.querySelectorAll("source[data-srcset]"),t=e.querySelector("img");s.forEach(e=>{e.srcset=e.dataset.srcset,delete e.dataset.srcset}),t&&t.dataset.src&&r(t,a)}(a,s):"VIDEO"===a.tagName?function(a){a.querySelectorAll("source[data-src]").forEach(e=>{e.src=e.dataset.src,delete e.dataset.src}),a.dataset.src&&(a.src=a.dataset.src);a.load(),a.classList.remove(e.classes.loading),a.classList.add(e.classes.loaded),o("video","success",a.src)}(a):"IFRAME"===a.tagName?function(a){a.dataset.src&&(a.src=a.dataset.src,delete a.dataset.src);a.classList.remove(e.classes.loading),a.classList.add(e.classes.loaded),o("iframe","success",a.src)}(a):a.hasAttribute("data-bg")?n(a,s):function(a){a.classList.remove(e.classes.loading),a.classList.add(e.classes.loaded),a.dispatchEvent(new CustomEvent("lazyloaded")),o("content","success")}(a))}function r(s,t=0){const n=s.dataset.src,l=s.dataset.srcset;if(!n&&!l)return void console.warn("Lazy image missing data-src or data-srcset",s);const c=new Image;c.onload=()=>{l&&(s.srcset=l),n&&(s.src=n),e.enableBlurUp&&!a()&&(s.style.filter="blur(0)",s.style.transition="filter 0.3s ease"),s.classList.remove(e.classes.loading),s.classList.add(e.classes.loaded);const t=s.parentElement?.querySelector(`.${e.classes.placeholder}`);t&&(t.style.opacity="0",setTimeout(()=>t.remove(),300)),o("image","success",s.src)},c.onerror=()=>{e.enableRetry&&t<e.maxRetries?setTimeout(()=>{r(s,t+1)},e.retryDelay*(t+1)):(s.classList.remove(e.classes.loading),s.classList.add(e.classes.error),function(e){const a=document.createElement("div");a.className="lazy-error-placeholder",a.innerHTML='\n            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <rect width="40" height="40" rx="4" fill="#f3f4f6"/>\n                <path d="M20 14v8m0 4h.01" stroke="#9ca3af" stroke-width="2" stroke-linecap="round"/>\n            </svg>\n            <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #6b7280;">Failed to load image</p>\n        ',a.style.cssText="\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 2rem;\n            background: #f9fafb;\n            border-radius: 8px;\n        ",e.parentNode.insertBefore(a,e.nextSibling)}(s),o("image","error",s.dataset.src))},l&&(c.srcset=l),n&&(c.src=n)}function n(s,t=0){const r=s.dataset.bg;if(!r)return;const l=new Image;l.onload=()=>{s.style.backgroundImage=`url('${r}')`,s.classList.remove(e.classes.loading),s.classList.add(e.classes.loaded),e.enableBlurUp&&!a()&&(s.style.filter="blur(0)",s.style.transition="filter 0.3s ease"),o("background","success",r)},l.onerror=()=>{e.enableRetry&&t<e.maxRetries?setTimeout(()=>{n(s,t+1)},e.retryDelay*(t+1)):(s.classList.remove(e.classes.loading),s.classList.add(e.classes.error),o("background","error",r))},l.src=r}function o(e,a,s=""){window.gtag&&gtag("event","lazy_load",{event_category:"Performance",event_label:e,value:"success"===a?1:0}),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||console.log(`[Lazy Load] ${e} - ${a}`,s)}function l(){const t=document.querySelectorAll("\n            img.lazy[data-src],\n            img.lazy[data-srcset],\n            picture.lazy,\n            video.lazy,\n            iframe.lazy,\n            [data-bg].lazy,\n            [data-lazy].lazy\n        ");t.forEach(t=>{e.enableBlurUp&&!a()&&(t.style.filter="blur(10px)"),s.observe(t)}),console.log(`[Lazy Loading] Initialized for ${t.length} elements`)}function c(){console.warn("[Lazy Loading] Intersection Observer not supported, using fallback");document.querySelectorAll(".lazy").forEach(e=>{t(e)})}window.lazyLoadElement=function(e){e&&t(e)},window.retryFailedLazyLoads=function(){document.querySelectorAll(`.${e.classes.error}`).forEach(a=>{a.classList.remove(e.classes.error),t(a)})},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{"IntersectionObserver"in window?l():c()}):"IntersectionObserver"in window?l():c(),window.lazyLoadingConfig=e}();
//# sourceMappingURL=lazy-loading.min.js.map