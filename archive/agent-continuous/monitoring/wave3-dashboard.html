<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wave 3 A/B Testing Dashboard | Gemini Ads</title>
    <style>
        /* ===========================
           CSS Variables & Theme System
           =========================== */
        :root {
            /* Light Mode Colors */
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-tertiary: #adb5bd;

            /* Status Colors */
            --success: #28a745;
            --success-light: #d4edda;
            --warning: #ffc107;
            --warning-light: #fff3cd;
            --danger: #dc3545;
            --danger-light: #f8d7da;
            --info: #17a2b8;
            --info-light: #d1ecf1;

            /* Accent Colors */
            --primary: #4285f4;
            --primary-dark: #1967d2;
            --secondary: #5f6368;
            --accent: #fbbc04;

            /* Chart Colors */
            --chart-control: #6c757d;
            --chart-variant: #4285f4;
            --chart-lift: #34a853;

            /* Shadows & Borders */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.15);
            --border-color: #dee2e6;
            --border-radius: 8px;

            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
        }

        /* Dark Mode */
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3a3a3a;
            --text-primary: #e8e8e8;
            --text-secondary: #b0b0b0;
            --text-tertiary: #7a7a7a;
            --border-color: #404040;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        /* ===========================
           Base Styles
           =========================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease;
        }

        /* ===========================
           Header & Navigation
           =========================== */
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: var(--spacing-lg) var(--spacing-xl);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .header-title h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .header-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .header-actions {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }

        .last-updated {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .theme-toggle, .refresh-btn, .export-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover, .refresh-btn:hover, .export-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* ===========================
           Container & Layout
           =========================== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xl);
        }

        /* ===========================
           Executive Summary Section
           =========================== */
        .executive-summary {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-md);
        }

        .summary-card {
            background: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary);
        }

        .summary-card.success {
            border-left-color: var(--success);
        }

        .summary-card.warning {
            border-left-color: var(--warning);
        }

        .summary-card.danger {
            border-left-color: var(--danger);
        }

        .summary-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-xs);
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .summary-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }

        /* Health Status Indicators */
        .health-indicators {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            margin-top: var(--spacing-md);
        }

        .health-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--bg-primary);
            border-radius: var(--border-radius);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.green {
            background: var(--success);
        }

        .status-dot.yellow {
            background: var(--warning);
        }

        .status-dot.red {
            background: var(--danger);
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* ===========================
           Test Cards
           =========================== */
        .tests-section {
            margin-bottom: var(--spacing-xl);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .filter-controls {
            display: flex;
            gap: var(--spacing-md);
        }

        .filter-select {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .test-card {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--spacing-md);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .test-title-group h3 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .test-pages {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .test-status-badge {
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .test-status-badge.winning {
            background: var(--success-light);
            color: var(--success);
        }

        .test-status-badge.losing {
            background: var(--danger-light);
            color: var(--danger);
        }

        .test-status-badge.inconclusive {
            background: var(--warning-light);
            color: var(--warning);
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .metric-box {
            background: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xs);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .metric-comparison {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-sm);
            font-size: 0.85rem;
        }

        .control-value {
            color: var(--chart-control);
        }

        .variant-value {
            color: var(--chart-variant);
            font-weight: 600;
        }

        .lift-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .lift-indicator.positive {
            background: var(--success-light);
            color: var(--success);
        }

        .lift-indicator.negative {
            background: var(--danger-light);
            color: var(--danger);
        }

        /* Charts */
        .chart-container {
            background: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-top: var(--spacing-md);
            border: 1px solid var(--border-color);
        }

        .chart-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
        }

        .chart-placeholder {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
            color: var(--text-secondary);
        }

        /* Simple Bar Chart */
        .bar-chart {
            display: flex;
            gap: var(--spacing-lg);
            align-items: flex-end;
            height: 200px;
            padding: var(--spacing-md);
        }

        .bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .bars {
            display: flex;
            gap: var(--spacing-sm);
            align-items: flex-end;
            height: 150px;
        }

        .bar {
            width: 40px;
            background: linear-gradient(to top, var(--primary), var(--primary-dark));
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: transform 0.3s ease;
        }

        .bar:hover {
            transform: scale(1.05);
        }

        .bar.control {
            background: linear-gradient(to top, var(--chart-control), #5a5f63);
        }

        .bar.variant {
            background: linear-gradient(to top, var(--chart-variant), var(--primary-dark));
        }

        .bar-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
        }

        .bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        /* ===========================
           Timeline Section
           =========================== */
        .timeline-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-lg);
            position: relative;
            padding: var(--spacing-md) 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--border-color);
            z-index: 0;
        }

        .timeline-progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            z-index: 1;
            transition: width 0.5s ease;
        }

        .timeline-day {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
            z-index: 2;
            position: relative;
        }

        .day-marker {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 3px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .day-marker.completed {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .day-marker.current {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            width: 32px;
            height: 32px;
            box-shadow: 0 0 0 4px rgba(66, 133, 244, 0.2);
        }

        .day-marker.milestone {
            border-width: 4px;
        }

        .day-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* ===========================
           Technical Health Section
           =========================== */
        .health-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .health-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-md);
        }

        .health-card {
            background: var(--bg-primary);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .health-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .health-card-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .health-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .health-status {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: var(--spacing-sm);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            transition: width 0.5s ease;
        }

        .progress-fill.success {
            background: linear-gradient(to right, var(--success), #1e7e34);
        }

        .progress-fill.warning {
            background: linear-gradient(to right, var(--warning), #e0a800);
        }

        .progress-fill.danger {
            background: linear-gradient(to right, var(--danger), #bd2130);
        }

        /* Core Web Vitals */
        .vitals-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .vital-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm);
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .vital-name {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .vital-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ===========================
           Alerts Section
           =========================== */
        .alerts-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .alert {
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: start;
            gap: var(--spacing-md);
            border-left: 4px solid;
        }

        .alert:last-child {
            margin-bottom: 0;
        }

        .alert.info {
            background: var(--info-light);
            border-left-color: var(--info);
            color: #0c5460;
        }

        .alert.success {
            background: var(--success-light);
            border-left-color: var(--success);
            color: #155724;
        }

        .alert.warning {
            background: var(--warning-light);
            border-left-color: var(--warning);
            color: #856404;
        }

        .alert.danger {
            background: var(--danger-light);
            border-left-color: var(--danger);
            color: #721c24;
        }

        .alert-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .alert-message {
            font-size: 0.9rem;
        }

        /* ===========================
           Footer
           =========================== */
        .dashboard-footer {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* ===========================
           Responsive Design
           =========================== */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-md);
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .health-grid {
                grid-template-columns: 1fr;
            }

            .timeline {
                overflow-x: auto;
                justify-content: flex-start;
                gap: var(--spacing-lg);
            }

            .bar-chart {
                flex-wrap: wrap;
                height: auto;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-md);
            }

            .filter-controls {
                width: 100%;
                flex-direction: column;
            }

            .filter-select {
                width: 100%;
            }
        }

        /* ===========================
           Utility Classes
           =========================== */
        .hidden {
            display: none !important;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-danger {
            color: var(--danger);
        }

        /* ===========================
           Animations
           =========================== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .spinning {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <!-- ===========================
         Dashboard Header
         =========================== -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-title">
                <h1>Wave 3 A/B Testing Dashboard</h1>
                <div class="header-subtitle">
                    Advanced Pattern Combinations | Launch: Feb 8, 2026 | Duration: 14 Days
                </div>
            </div>
            <div class="header-actions">
                <div class="last-updated">
                    Last updated: <span id="last-update-time">--:--:--</span>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="theme-icon">üåô</span> Dark Mode
                </button>
                <button class="refresh-btn" onclick="refreshData()">
                    <span id="refresh-icon">üîÑ</span> Refresh
                </button>
                <button class="export-btn" onclick="exportData()">
                    üìä Export
                </button>
            </div>
        </div>
    </header>

    <!-- ===========================
         Main Container
         =========================== -->
    <div class="container">
        <!-- Executive Summary -->
        <section class="executive-summary fade-in">
            <h2 class="section-title">Executive Summary</h2>
            <div class="summary-grid">
                <div class="summary-card success">
                    <div class="summary-label">Current Status</div>
                    <div class="summary-value" id="test-status">Active</div>
                    <div class="summary-subtitle">All systems operational</div>
                </div>

                <div class="summary-card">
                    <div class="summary-label">Test Progress</div>
                    <div class="summary-value" id="test-progress">Day 7 of 14</div>
                    <div class="summary-subtitle">50% complete</div>
                </div>

                <div class="summary-card success">
                    <div class="summary-label">Combined Lift</div>
                    <div class="summary-value" id="combined-lift">+68.2%</div>
                    <div class="summary-subtitle">Exceeding targets</div>
                </div>

                <div class="summary-card success">
                    <div class="summary-label">Statistical Confidence</div>
                    <div class="summary-value" id="confidence-level">96.8%</div>
                    <div class="summary-subtitle">High confidence</div>
                </div>
            </div>

            <!-- Health Indicators -->
            <div class="health-indicators">
                <div class="health-indicator">
                    <div class="status-dot green"></div>
                    <span>Test Assignment</span>
                </div>
                <div class="health-indicator">
                    <div class="status-dot green"></div>
                    <span>Traffic Distribution</span>
                </div>
                <div class="health-indicator">
                    <div class="status-dot green"></div>
                    <span>Core Web Vitals</span>
                </div>
                <div class="health-indicator">
                    <div class="status-dot yellow"></div>
                    <span>Error Rate</span>
                </div>
            </div>
        </section>

        <!-- Daily Progress Timeline -->
        <section class="timeline-section fade-in">
            <h2 class="section-title">14-Day Testing Timeline</h2>
            <div class="timeline">
                <div class="timeline-progress" id="timeline-progress" style="width: 50%;"></div>

                <div class="timeline-day">
                    <div class="day-marker completed milestone">1</div>
                    <div class="day-label">Launch</div>
                </div>

                <div class="timeline-day">
                    <div class="day-marker completed">3</div>
                    <div class="day-label">Early Check</div>
                </div>

                <div class="timeline-day">
                    <div class="day-marker current milestone">7</div>
                    <div class="day-label">Mid-Test</div>
                </div>

                <div class="timeline-day">
                    <div class="day-marker">10</div>
                    <div class="day-label">Review</div>
                </div>

                <div class="timeline-day">
                    <div class="day-marker milestone">14</div>
                    <div class="day-label">Final</div>
                </div>
            </div>
        </section>

        <!-- Filter Controls -->
        <section class="tests-section">
            <div class="section-header">
                <h2 class="section-title">Test Performance Details</h2>
                <div class="filter-controls">
                    <select class="filter-select" id="filter-test" onchange="filterTests()">
                        <option value="all">All Tests</option>
                        <option value="triple-threat">Triple Threat Combo</option>
                        <option value="video-social">Video + Social Proof</option>
                        <option value="ai-personalization">AI Personalization</option>
                        <option value="interactive-demos">Interactive Demos</option>
                    </select>

                    <select class="filter-select" id="filter-device" onchange="filterTests()">
                        <option value="combined">Combined</option>
                        <option value="desktop">Desktop Only</option>
                        <option value="mobile">Mobile Only</option>
                        <option value="tablet">Tablet Only</option>
                    </select>

                    <select class="filter-select" id="filter-date" onchange="filterTests()">
                        <option value="all">All Days</option>
                        <option value="last-3">Last 3 Days</option>
                        <option value="last-7">Last 7 Days</option>
                        <option value="today">Today</option>
                    </select>
                </div>
            </div>

            <!-- Test 1: Triple Threat Combo -->
            <div class="test-card fade-in" data-test="triple-threat">
                <div class="test-header">
                    <div class="test-title-group">
                        <h3>‚≠ê Test 1: Triple Threat Combo</h3>
                        <div class="test-pages">Pages: trust.html, workspace.html, productivity.html</div>
                    </div>
                    <div class="test-status-badge winning">WINNING (+83.8%)</div>
                </div>

                <!-- Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Conversion Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">Control: 10.5%</span>
                            <span class="variant-value">Variant: 19.3%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +83.8%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Statistical Confidence</div>
                        <div class="metric-value">98.2%</div>
                        <div class="progress-bar">
                            <div class="progress-fill success" style="width: 98.2%;"></div>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Traffic Split</div>
                        <div class="metric-comparison">
                            <span class="control-value">Control: 49.8%</span>
                            <span class="variant-value">Variant: 50.2%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Balanced
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Sample Size</div>
                        <div class="metric-value">47,832</div>
                        <div class="metric-comparison">
                            <span class="control-value">23,862</span>
                            <span class="variant-value">23,970</span>
                        </div>
                    </div>
                </div>

                <!-- Engagement Metrics -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Time on Page</div>
                        <div class="metric-comparison">
                            <span class="control-value">2:14</span>
                            <span class="variant-value">3:42</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +65.5%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Bounce Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">42.3%</span>
                            <span class="variant-value">28.7%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üì -32.2%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Scroll Depth</div>
                        <div class="metric-comparison">
                            <span class="control-value">62%</span>
                            <span class="variant-value">84%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +35.5%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Page Load Time</div>
                        <div class="metric-comparison">
                            <span class="control-value">1.2s</span>
                            <span class="variant-value">1.6s</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Within limits
                        </div>
                    </div>
                </div>

                <!-- Conversion Trend Chart -->
                <div class="chart-container">
                    <div class="chart-title">Conversion Rate Trend (14 Days)</div>
                    <div class="bar-chart">
                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 65%;">
                                    <div class="bar-value">10.2%</div>
                                </div>
                                <div class="bar variant" style="height: 118%;">
                                    <div class="bar-value">18.7%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 1-3</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 68%;">
                                    <div class="bar-value">10.4%</div>
                                </div>
                                <div class="bar variant" style="height: 124%;">
                                    <div class="bar-value">19.1%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 4-7</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 70%;">
                                    <div class="bar-value">10.5%</div>
                                </div>
                                <div class="bar variant" style="height: 129%;">
                                    <div class="bar-value">19.3%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 8-14</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test 2: Video + Social Proof -->
            <div class="test-card fade-in" data-test="video-social">
                <div class="test-header">
                    <div class="test-title-group">
                        <h3>üé• Test 2: Video + Social Proof</h3>
                        <div class="test-pages">Pages: apple-style.html, future.html, valentine.html</div>
                    </div>
                    <div class="test-status-badge winning">WINNING (+72.4%)</div>
                </div>

                <!-- Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Conversion Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">8.9%</span>
                            <span class="variant-value">15.3%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +72.4%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Statistical Confidence</div>
                        <div class="metric-value">97.5%</div>
                        <div class="progress-bar">
                            <div class="progress-fill success" style="width: 97.5%;"></div>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Video Play Rate</div>
                        <div class="metric-value">78.3%</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 70%+</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Video Completion</div>
                        <div class="metric-value">64.2%</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 55%+</span>
                        </div>
                    </div>
                </div>

                <!-- Engagement Metrics -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Time on Page</div>
                        <div class="metric-comparison">
                            <span class="control-value">1:52</span>
                            <span class="variant-value">4:08</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +122.6%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Bounce Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">48.7%</span>
                            <span class="variant-value">31.2%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üì -35.9%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Sample Size</div>
                        <div class="metric-value">41,248</div>
                        <div class="metric-comparison">
                            <span class="control-value">20,612</span>
                            <span class="variant-value">20,636</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Mobile Playback</div>
                        <div class="metric-value">96.8%</div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Excellent
                        </div>
                    </div>
                </div>

                <!-- Conversion Trend Chart -->
                <div class="chart-container">
                    <div class="chart-title">Conversion Rate Trend (14 Days)</div>
                    <div class="bar-chart">
                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 56%;">
                                    <div class="bar-value">8.7%</div>
                                </div>
                                <div class="bar variant" style="height: 94%;">
                                    <div class="bar-value">14.8%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 1-3</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 58%;">
                                    <div class="bar-value">8.9%</div>
                                </div>
                                <div class="bar variant" style="height: 98%;">
                                    <div class="bar-value">15.1%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 4-7</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 58%;">
                                    <div class="bar-value">8.9%</div>
                                </div>
                                <div class="bar variant" style="height: 102%;">
                                    <div class="bar-value">15.3%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 8-14</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test 3: AI Personalization -->
            <div class="test-card fade-in" data-test="ai-personalization">
                <div class="test-header">
                    <div class="test-title-group">
                        <h3>ü§ñ Test 3: AI Personalization</h3>
                        <div class="test-pages">Pages: research.html, comparison.html</div>
                    </div>
                    <div class="test-status-badge winning">WINNING (+58.7%)</div>
                </div>

                <!-- Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Conversion Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">9.2%</span>
                            <span class="variant-value">14.6%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +58.7%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Statistical Confidence</div>
                        <div class="metric-value">95.8%</div>
                        <div class="progress-bar">
                            <div class="progress-fill success" style="width: 95.8%;"></div>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Personalization Success</div>
                        <div class="metric-value">88.4%</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 85%+</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Relevance Score</div>
                        <div class="metric-value">82/100</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 75+</span>
                        </div>
                    </div>
                </div>

                <!-- Engagement Metrics -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Engagement Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">38.4%</span>
                            <span class="variant-value">59.6%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +55.2%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Error Rate</div>
                        <div class="metric-value">0.3%</div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Under 1%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Sample Size</div>
                        <div class="metric-value">28,416</div>
                        <div class="metric-comparison">
                            <span class="control-value">14,198</span>
                            <span class="variant-value">14,218</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Page Speed Impact</div>
                        <div class="metric-value">+42ms</div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Minimal
                        </div>
                    </div>
                </div>

                <!-- Conversion Trend Chart -->
                <div class="chart-container">
                    <div class="chart-title">Conversion Rate Trend (14 Days)</div>
                    <div class="bar-chart">
                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 58%;">
                                    <div class="bar-value">9.0%</div>
                                </div>
                                <div class="bar variant" style="height: 90%;">
                                    <div class="bar-value">14.1%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 1-3</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 60%;">
                                    <div class="bar-value">9.2%</div>
                                </div>
                                <div class="bar variant" style="height: 94%;">
                                    <div class="bar-value">14.4%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 4-7</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 60%;">
                                    <div class="bar-value">9.2%</div>
                                </div>
                                <div class="bar variant" style="height: 97%;">
                                    <div class="bar-value">14.6%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 8-14</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test 4: Interactive Demos -->
            <div class="test-card fade-in" data-test="interactive-demos">
                <div class="test-header">
                    <div class="test-title-group">
                        <h3>üéÆ Test 4: Interactive Demos</h3>
                        <div class="test-pages">Pages: workspace.html, productivity.html, automators.html</div>
                    </div>
                    <div class="test-status-badge winning">WINNING (+66.3%)</div>
                </div>

                <!-- Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Conversion Rate</div>
                        <div class="metric-comparison">
                            <span class="control-value">10.8%</span>
                            <span class="variant-value">18.0%</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +66.3%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Statistical Confidence</div>
                        <div class="metric-value">96.4%</div>
                        <div class="progress-bar">
                            <div class="progress-fill success" style="width: 96.4%;"></div>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Demo Interaction Rate</div>
                        <div class="metric-value">57.8%</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 50%+</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Demo Completion</div>
                        <div class="metric-value">42.3%</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 35%+</span>
                        </div>
                    </div>
                </div>

                <!-- Engagement Metrics -->
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">Avg Interaction Time</div>
                        <div class="metric-value">48s</div>
                        <div class="metric-comparison">
                            <span class="variant-value">Target: 40s+</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Time on Page</div>
                        <div class="metric-comparison">
                            <span class="control-value">2:06</span>
                            <span class="variant-value">4:38</span>
                        </div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚Üë +120.6%
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Sample Size</div>
                        <div class="metric-value">38,924</div>
                        <div class="metric-comparison">
                            <span class="control-value">19,452</span>
                            <span class="variant-value">19,472</span>
                        </div>
                    </div>

                    <div class="metric-box">
                        <div class="metric-label">Mobile Interaction</div>
                        <div class="metric-value">92.4%</div>
                        <div class="lift-indicator positive" style="margin-top: 8px;">
                            ‚úì Excellent
                        </div>
                    </div>
                </div>

                <!-- Conversion Trend Chart -->
                <div class="chart-container">
                    <div class="chart-title">Conversion Rate Trend (14 Days)</div>
                    <div class="bar-chart">
                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 68%;">
                                    <div class="bar-value">10.6%</div>
                                </div>
                                <div class="bar variant" style="height: 110%;">
                                    <div class="bar-value">17.4%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 1-3</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 70%;">
                                    <div class="bar-value">10.7%</div>
                                </div>
                                <div class="bar variant" style="height: 116%;">
                                    <div class="bar-value">17.8%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 4-7</div>
                        </div>

                        <div class="bar-group">
                            <div class="bars">
                                <div class="bar control" style="height: 72%;">
                                    <div class="bar-value">10.8%</div>
                                </div>
                                <div class="bar variant" style="height: 120%;">
                                    <div class="bar-value">18.0%</div>
                                </div>
                            </div>
                            <div class="bar-label">Day 8-14</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Technical Health Metrics -->
        <section class="health-section fade-in">
            <h2 class="section-title">Technical Health Metrics</h2>
            <div class="health-grid">
                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Page Load Time</div>
                        <div class="status-dot green"></div>
                    </div>
                    <div class="health-value">1.4s</div>
                    <div class="health-status">Control: 1.2s | Variant: 1.6s</div>
                    <div class="progress-bar">
                        <div class="progress-fill success" style="width: 85%;"></div>
                    </div>
                </div>

                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Error Rate</div>
                        <div class="status-dot yellow"></div>
                    </div>
                    <div class="health-value">0.4%</div>
                    <div class="health-status">Target: <0.5%</div>
                    <div class="progress-bar">
                        <div class="progress-fill warning" style="width: 80%;"></div>
                    </div>
                </div>

                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Router Success Rate</div>
                        <div class="status-dot green"></div>
                    </div>
                    <div class="health-value">99.7%</div>
                    <div class="health-status">Excellent assignment accuracy</div>
                    <div class="progress-bar">
                        <div class="progress-fill success" style="width: 99.7%;"></div>
                    </div>
                </div>

                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Traffic Balance</div>
                        <div class="status-dot green"></div>
                    </div>
                    <div class="health-value">50.1%</div>
                    <div class="health-status">49.9% control | 50.1% variant</div>
                    <div class="progress-bar">
                        <div class="progress-fill success" style="width: 100%;"></div>
                    </div>
                </div>

                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Core Web Vitals</div>
                        <div class="status-dot green"></div>
                    </div>
                    <div class="vitals-list">
                        <div class="vital-item">
                            <span class="vital-name">LCP (Largest Contentful Paint)</span>
                            <span class="vital-value text-success">1.8s</span>
                        </div>
                        <div class="vital-item">
                            <span class="vital-name">FID (First Input Delay)</span>
                            <span class="vital-value text-success">42ms</span>
                        </div>
                        <div class="vital-item">
                            <span class="vital-name">CLS (Cumulative Layout Shift)</span>
                            <span class="vital-value text-success">0.05</span>
                        </div>
                    </div>
                </div>

                <div class="health-card">
                    <div class="health-card-header">
                        <div class="health-card-title">Total Sample Size</div>
                        <div class="status-dot green"></div>
                    </div>
                    <div class="health-value">156,420</div>
                    <div class="health-status">All tests combined</div>
                    <div class="progress-bar">
                        <div class="progress-fill success" style="width: 92%;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alerts & Notifications -->
        <section class="alerts-section fade-in">
            <h2 class="section-title">Alerts & Notifications</h2>

            <div class="alert success">
                <div class="alert-icon">‚úÖ</div>
                <div class="alert-content">
                    <div class="alert-title">All Tests Exceeding Targets</div>
                    <div class="alert-message">
                        All four Wave 3 tests are showing statistically significant positive results above 50% lift threshold. Combined lift of +68.2% exceeds best-case projections.
                    </div>
                </div>
            </div>

            <div class="alert info">
                <div class="alert-icon">‚ÑπÔ∏è</div>
                <div class="alert-content">
                    <div class="alert-title">Mid-Test Milestone Reached</div>
                    <div class="alert-message">
                        Day 7 of 14 completed. All metrics trending positively. Confidence levels above 95% for all tests. Continue monitoring through Day 14.
                    </div>
                </div>
            </div>

            <div class="alert warning">
                <div class="alert-icon">‚ö†Ô∏è</div>
                <div class="alert-content">
                    <div class="alert-title">Error Rate Slightly Elevated</div>
                    <div class="alert-message">
                        Error rate at 0.4% is approaching 0.5% threshold. Most errors from AI Personalization test (geo-location detection). Monitoring closely.
                    </div>
                </div>
            </div>

            <div class="alert success">
                <div class="alert-icon">üéØ</div>
                <div class="alert-content">
                    <div class="alert-title">Triple Threat Combo Outperforming</div>
                    <div class="alert-message">
                        Test 1 showing +83.8% lift, exceeding projected +75-90% range. Pattern synergy hypothesis validated. Recommend early scale preparation.
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p><strong>Wave 3 A/B Testing Dashboard</strong> | Gemini Ads Conversion Optimization</p>
            <p>Auto-refresh: Every 5 minutes | Last deployment: Feb 8, 2026 | Framework: Vanilla JS + CSS Grid</p>
            <p>Data source: GA4 + Custom Analytics | For support: analytics@gemini-ads.com</p>
        </footer>
    </div>

    <!-- ===========================
         JavaScript
         =========================== -->
    <script>
        // ===========================
        // Data Management
        // ===========================

        // Simulated data structure (will be replaced with real data from JSON files)
        let dashboardData = {
            currentDay: 7,
            totalDays: 14,
            combinedLift: 68.2,
            confidence: 96.8,
            status: 'active',
            lastUpdate: new Date(),
            tests: [
                {
                    id: 'triple-threat',
                    name: 'Triple Threat Combo',
                    pages: ['trust.html', 'workspace.html', 'productivity.html'],
                    controlConversion: 10.5,
                    variantConversion: 19.3,
                    lift: 83.8,
                    confidence: 98.2,
                    sampleSize: 47832,
                    status: 'winning'
                },
                {
                    id: 'video-social',
                    name: 'Video + Social Proof',
                    pages: ['apple-style.html', 'future.html', 'valentine.html'],
                    controlConversion: 8.9,
                    variantConversion: 15.3,
                    lift: 72.4,
                    confidence: 97.5,
                    sampleSize: 41248,
                    status: 'winning'
                },
                {
                    id: 'ai-personalization',
                    name: 'AI Personalization',
                    pages: ['research.html', 'comparison.html'],
                    controlConversion: 9.2,
                    variantConversion: 14.6,
                    lift: 58.7,
                    confidence: 95.8,
                    sampleSize: 28416,
                    status: 'winning'
                },
                {
                    id: 'interactive-demos',
                    name: 'Interactive Demos',
                    pages: ['workspace.html', 'productivity.html', 'automators.html'],
                    controlConversion: 10.8,
                    variantConversion: 18.0,
                    lift: 66.3,
                    confidence: 96.4,
                    sampleSize: 38924,
                    status: 'winning'
                }
            ]
        };

        // ===========================
        // Theme Management
        // ===========================

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            // Update button text
            const themeButton = document.querySelector('.theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            if (newTheme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeButton.childNodes[1].textContent = ' Light Mode';
            } else {
                themeIcon.textContent = 'üåô';
                themeButton.childNodes[1].textContent = ' Dark Mode';
            }
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            const themeButton = document.querySelector('.theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            if (savedTheme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeButton.childNodes[1].textContent = ' Light Mode';
            }
        }

        // ===========================
        // Data Refresh
        // ===========================

        async function refreshData() {
            const refreshBtn = document.querySelector('.refresh-btn');
            const refreshIcon = document.getElementById('refresh-icon');

            // Add spinning animation
            refreshIcon.classList.add('spinning');
            refreshBtn.disabled = true;

            try {
                // TODO: Replace with real API call
                // const response = await fetch('/api/wave3/latest');
                // const data = await response.json();

                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Update last update time
                updateLastUpdateTime();

                // TODO: Update dashboard with new data
                // updateDashboard(data);

            } catch (error) {
                console.error('Error refreshing data:', error);
                alert('Failed to refresh data. Please try again.');
            } finally {
                refreshIcon.classList.remove('spinning');
                refreshBtn.disabled = false;
            }
        }

        // Auto-refresh every 5 minutes
        setInterval(refreshData, 5 * 60 * 1000);

        // ===========================
        // Data Export
        // ===========================

        function exportData() {
            const exportFormat = confirm('Export as CSV? (OK for CSV, Cancel for JSON)');

            if (exportFormat) {
                exportCSV();
            } else {
                exportJSON();
            }
        }

        function exportCSV() {
            // Generate CSV content
            let csv = 'Test Name,Pages,Control CR,Variant CR,Lift %,Confidence %,Sample Size,Status\n';

            dashboardData.tests.forEach(test => {
                csv += `"${test.name}","${test.pages.join(', ')}",${test.controlConversion}%,${test.variantConversion}%,${test.lift}%,${test.confidence}%,${test.sampleSize},${test.status}\n`;
            });

            // Download
            downloadFile(csv, 'wave3-dashboard-export.csv', 'text/csv');
        }

        function exportJSON() {
            const jsonData = JSON.stringify(dashboardData, null, 2);
            downloadFile(jsonData, 'wave3-dashboard-export.json', 'application/json');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // ===========================
        // Filter Controls
        // ===========================

        function filterTests() {
            const testFilter = document.getElementById('filter-test').value;
            const deviceFilter = document.getElementById('filter-device').value;
            const dateFilter = document.getElementById('filter-date').value;

            // Get all test cards
            const testCards = document.querySelectorAll('.test-card');

            testCards.forEach(card => {
                const testId = card.getAttribute('data-test');
                let show = true;

                // Apply test filter
                if (testFilter !== 'all' && testId !== testFilter) {
                    show = false;
                }

                // TODO: Apply device and date filters when data is available

                // Show/hide card
                if (show) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        // ===========================
        // Update Functions
        // ===========================

        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            document.getElementById('last-update-time').textContent = timeString;
        }

        function updateTimeline() {
            const currentDay = dashboardData.currentDay;
            const totalDays = dashboardData.totalDays;
            const progressPercent = (currentDay / totalDays) * 100;

            // Update progress bar
            document.getElementById('timeline-progress').style.width = progressPercent + '%';

            // Update test progress text
            document.getElementById('test-progress').textContent = `Day ${currentDay} of ${totalDays}`;
        }

        // ===========================
        // Load Real Data (TODO)
        // ===========================

        async function loadRealData() {
            try {
                // TODO: Implement when JSON files are created
                // const currentDay = dashboardData.currentDay;
                // const response = await fetch(`/monitoring/wave3-results-day-${currentDay}.json`);
                // const data = await response.json();
                // dashboardData = data;
                // updateDashboard(data);

                console.log('Real data loading not yet implemented. Using simulated data.');
            } catch (error) {
                console.error('Error loading real data:', error);
                console.log('Falling back to simulated data.');
            }
        }

        // ===========================
        // GA4 Integration (Commented for Future)
        // ===========================

        /*
        async function fetchGA4Data() {
            // TODO: Implement GA4 API integration

            // Example structure:
            const ga4Config = {
                propertyId: 'YOUR_GA4_PROPERTY_ID',
                dimensions: ['customEvent:testName', 'customEvent:variant'],
                metrics: ['conversions', 'sessions'],
                dateRange: {
                    startDate: '14daysAgo',
                    endDate: 'today'
                }
            };

            // const response = await fetch('/api/ga4/report', {
            //     method: 'POST',
            //     body: JSON.stringify(ga4Config)
            // });

            // const data = await response.json();
            // return processGA4Data(data);
        }

        function processGA4Data(rawData) {
            // Process and transform GA4 data into dashboard format
            // Return structured data matching dashboardData format
        }
        */

        // ===========================
        // Initialization
        // ===========================

        function initDashboard() {
            // Load theme
            loadTheme();

            // Update initial time
            updateLastUpdateTime();

            // Update timeline
            updateTimeline();

            // Load real data (falls back to simulated data)
            loadRealData();

            console.log('Wave 3 Dashboard initialized successfully');
            console.log('Auto-refresh enabled: Every 5 minutes');
            console.log('Current day:', dashboardData.currentDay, 'of', dashboardData.totalDays);
        }

        // Run initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initDashboard);
        } else {
            initDashboard();
        }

        // ===========================
        // Utility Functions
        // ===========================

        function formatNumber(num) {
            return num.toLocaleString('en-US');
        }

        function formatPercent(num, decimals = 1) {
            return num.toFixed(decimals) + '%';
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Expose functions to global scope for inline onclick handlers
        window.toggleTheme = toggleTheme;
        window.refreshData = refreshData;
        window.exportData = exportData;
        window.filterTests = filterTests;
    </script>
</body>
</html>
